(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1082:function(t,e,s){"use strict";s.r(e);var i=s(1083),n=s.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(a);e.default=n.a},1083:function(t,e,s){"use strict";e.__esModule=!0;var i=h(s(28)),n=s(198),a=h(s(1480)),o=h(s(736)),r=h(s(86)),c=h(s(740)),l=h(s(753)),u=h(s(746)),d=h(s(752)),p=h(s(735)),f=s(85);function h(t){return t&&t.__esModule?t:{default:t}}e.default={name:"definition-list-index",data:function(){return{total:null,processListP:[],isLoading:!0,searchParams:{pageSize:10,pageNo:1,searchVal:"",userId:""},isLeft:!0}},mixins:[l.default],props:{},methods:Object.assign({},(0,n.mapActions)("dag",["getProcessListP"]),{_uploading:function(){(0,f.findComponentDownward)(this.$root,"roof-nav")._fileUpdate("DEFINITION")},_page:function(t){this.searchParams.pageNo=t},_pageSize:function(t){this.searchParams.pageSize=t},_onConditions:function(t){this.searchParams.searchVal=t.searchVal,this.searchParams.pageNo=1},_getList:function(t){var e=this;0==sessionStorage.getItem("isLeft")?this.isLeft=!1:this.isLeft=!0,this.isLoading=!t,this.getProcessListP(this.searchParams).then((function(t){e.searchParams.pageNo>1&&0==t.totalList.length?e.searchParams.pageNo=e.searchParams.pageNo-1:(e.processListP=[],e.processListP=t.totalList,e.total=t.total,e.isLoading=!1)})).catch((function(t){e.isLoading=!1}))},_onUpdate:function(){this._debounceGET("false")},_updateList:function(){this.searchParams.pageNo=1,this.searchParams.searchVal="",this._debounceGET()}}),watch:{$route:function(t){this.searchParams.pageNo=i.default.isEmpty(t.query)?1:t.query.pageNo}},created:function(){r.default.removeItem("subProcessId")},mounted:function(){this.$modal.destroy()},beforeDestroy:function(){sessionStorage.setItem("isLeft",1)},components:{mList:a.default,mConditions:u.default,mSpin:o.default,mListConstruction:p.default,mSecondaryMenu:d.default,mNoData:c.default}}},1084:function(t,e,s){"use strict";s.r(e);var i=s(1085),n=s.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(a);e.default=n.a},1085:function(t,e,s){"use strict";(function(t){e.__esModule=!0;var i=c(s(28)),n=c(s(892)),a=c(s(1331)),o=s(198),r=s(293);function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"definition-list",data:function(){return{list:[],strSelectIds:"",checkAll:!1}},props:{processList:Array,pageNo:Number,pageSize:Number},methods:Object.assign({},(0,o.mapActions)("dag",["editProcessState","getStartCheck","getReceiver","deleteDefinition","batchDeleteDefinition","exportDefinition","copyProcess"]),(0,o.mapActions)("security",["getWorkerGroupsAll"]),{_rtPublishStatus:function(t){return i.default.filter(r.publishStatus,(function(e){return e.code===t}))[0].desc},_treeView:function(t){this.$router.push({path:"/projects/definition/tree/"+t.id})},_start:function(t){var e=this;this.getWorkerGroupsAll(),this.getStartCheck({processDefinitionId:t.id}).then((function(s){var i=e,a=e.$modal.dialog({closable:!1,showMask:!0,escClose:!0,className:"v-modal-custom",transitionName:"opacityp",render:function(e){return e(n.default,{on:{onUpdate:function(){i._onUpdate(),a.remove()},close:function(){a.remove()}},props:{item:t}})}})})).catch((function(t){e.$message.error(t.msg||"")}))},_getReceiver:function(t){var e=this;return new Promise((function(s,i){e.getReceiver({processDefinitionId:t}).then((function(t){s({receivers:t.receivers&&t.receivers.split(",")||[],receiversCc:t.receiversCc&&t.receiversCc.split(",")||[]})}))}))},_timing:function(t){var e=this,s=this;this._getReceiver(t.id).then((function(i){var n=e.$modal.dialog({closable:!1,showMask:!0,escClose:!0,className:"v-modal-custom",transitionName:"opacityp",render:function(e){return e(a.default,{on:{onUpdate:function(){s._onUpdate(),n.remove()},close:function(){n.remove()}},props:{item:t,receiversD:i.receivers,receiversCcD:i.receiversCc,type:"timing"}})}})}))},_timingManage:function(t){this.$router.push({path:"/projects/definition/list/timing/"+t.id})},_closeDelete:function(t){t<0?this.$refs.poptipDeleteAll.doClose():this.$refs["poptip-delete-"+t][0].doClose()},_delete:function(t,e){var s=this;e<0?this._batchDelete():this.deleteDefinition({processDefinitionId:t.id}).then((function(t){s.$refs["poptip-delete-"+e][0].doClose(),s._onUpdate(),s.$message.success(t.msg)})).catch((function(t){s.$refs["poptip-delete-"+e][0].doClose(),s.$message.error(t.msg||"")}))},_edit:function(t){this.$router.push({path:"/projects/definition/list/"+t.id})},_downline:function(t){this._upProcessState({processId:t.id,releaseState:0})},_poponline:function(t){this._upProcessState({processId:t.id,releaseState:1})},_copyProcess:function(e){var s=this;this.copyProcess({processId:e.id}).then((function(e){s.$message.success(e.msg),t("body").find(".tooltip.fade.top.in").remove(),s._onUpdate()})).catch((function(t){s.$message.error(t.msg||"")}))},_export:function(t){var e=this;this.exportDefinition({processDefinitionIds:t.id,fileName:t.name}).catch((function(t){e.$message.error(t.msg||"")}))},_batchExport:function(){var t=this;this.exportDefinition({processDefinitionIds:this.strSelectIds,fileName:"process_"+(new Date).getTime()}).then((function(e){t._onUpdate(),t.checkAll=!1,t.strSelectIds=""})).catch((function(e){t.strSelectIds="",t.checkAll=!1,t.$message.error(e.msg)}))},_upProcessState:function(e){var s=this;this.editProcessState(e).then((function(e){s.$message.success(e.msg),t("body").find(".tooltip.fade.top.in").remove(),s._onUpdate()})).catch((function(t){s.$message.error(t.msg||"")}))},_onUpdate:function(){this.$emit("on-update")},_topCheckBoxClick:function(t){i.default.map(this.list,(function(e){return e.isCheck="ONLINE"!==e.releaseState&&t})),this._arrDelChange()},_arrDelChange:function(t){var e=[];this.list.forEach((function(t){t.isCheck&&e.push(t.id)})),this.strSelectIds=i.default.join(e,","),!1===t&&(this.checkAll=!1)},_batchDelete:function(){var t=this;this.$refs.poptipDeleteAll.doClose(),this.batchDeleteDefinition({processDefinitionIds:this.strSelectIds}).then((function(e){t._onUpdate(),t.checkAll=!1,t.strSelectIds="",t.$message.success(e.msg)})).catch((function(e){t.strSelectIds="",t.checkAll=!1,t.$message.error(e.msg||"")}))}}),watch:{processList:{handler:function(t){var e=this;this.checkAll=!1,this.list=[],setTimeout((function(){e.list=i.default.cloneDeep(t)}))},immediate:!0,deep:!0},pageNo:function(){this.strSelectIds=""}},created:function(){},mounted:function(){},components:{}}}).call(this,s(17))},1341:function(t,e,s){},1480:function(t,e,s){"use strict";s.r(e);var i=s(1666),n=s(1084);for(var a in n)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(a);var o=s(7),r=Object(o.a)(n.default,i.a,i.b,!1,null,null,null);e.default=r.exports},1502:function(t,e,s){"use strict";s(1341)},1610:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return n}));var i=function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"wrap-definition"},[i("m-list-construction",{attrs:{title:e.$t("Process definition")}},[i("template",{slot:"conditions"},[i("m-conditions",{on:{"on-conditions":e._onConditions}},[i("template",{slot:"button-group"},[i("x-button",{attrs:{type:"ghost",size:"small"},on:{click:function(){return t.$router.push({name:"definition-create"})}}},[e._v(e._s(e.$t("Create process")))]),e._v(" "),i("x-button",{attrs:{type:"ghost",size:"small"},on:{click:e._uploading}},[e._v(e._s(e.$t("Import process")))])],1)],2)],1),e._v(" "),i("template",{slot:"content"},[e.processListP.length||e.total>0?[i("m-list",{attrs:{"process-list":e.processListP,"page-no":e.searchParams.pageNo,"page-size":e.searchParams.pageSize},on:{"on-update":e._onUpdate}}),e._v(" "),i("div",{staticClass:"page-box"},[i("x-page",{attrs:{current:parseInt(e.searchParams.pageNo),total:e.total,"show-elevator":"","show-sizer":"","page-size-options":[10,30,50]},on:{"on-change":e._page,"on-size-change":e._pageSize}})],1)]:e._e(),e._v(" "),!e.processListP.length&&e.total<=0?[i("m-no-data")]:e._e(),e._v(" "),i("m-spin",{attrs:{"is-spin":e.isLoading,"is-left":e.isLeft}})],2)],2)],1)},n=[]},1666:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-model",staticStyle:{position:"relative"}},[s("div",{staticClass:"table-box"},[s("table",{staticClass:"fixed"},[s("tr",[s("th",{staticStyle:{"min-width":"50px"},attrs:{scope:"col"}},[s("x-checkbox",{on:{"on-change":t._topCheckBoxClick},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}})],1),t._v(" "),s("th",{staticStyle:{"min-width":"40px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("#")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"200px","max-width":"300px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Process Name")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"50px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("State")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"130px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Create Time")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"130px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Update Time")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"150px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Description")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Modify User")))])]),t._v(" "),s("th",{staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[s("div",{staticStyle:{width:"80px"}},[s("span",[t._v(t._s(t.$t("Timing state")))])])]),t._v(" "),s("th",{staticStyle:{"min-width":"300px"},attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Operation")))])])]),t._v(" "),t._l(t.list,(function(e,i){return s("tr",{key:e.id},[s("td",{attrs:{width:"50"}},[s("x-checkbox",{attrs:{disabled:"ONLINE"===e.releaseState},on:{"on-change":t._arrDelChange},model:{value:e.isCheck,callback:function(s){t.$set(e,"isCheck",s)},expression:"item.isCheck"}})],1),t._v(" "),s("td",{attrs:{width:"50"}},[s("span",[t._v(t._s(parseInt(1===t.pageNo?i+1:i+1+t.pageSize*(t.pageNo-1))))])]),t._v(" "),s("td",{staticStyle:{"min-width":"200px","max-width":"300px","padding-right":"10px"}},[s("span",{staticClass:"ellipsis"},[s("router-link",{staticClass:"links",attrs:{to:{path:"/projects/definition/list/"+e.id},tag:"a",title:e.name}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)]),t._v(" "),s("td",[s("span",[t._v(t._s(t._rtPublishStatus(e.releaseState)))])]),t._v(" "),s("td",[e.createTime?s("span",[t._v(t._s(t._f("formatDate")(e.createTime)))]):s("span",[t._v("-")])]),t._v(" "),s("td",[e.updateTime?s("span",[t._v(t._s(t._f("formatDate")(e.updateTime)))]):s("span",[t._v("-")])]),t._v(" "),s("td",[e.description?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip.large.top.start.light",value:{text:e.description,maxWidth:"500px"},expression:"{text: item.description, maxWidth: '500px'}",modifiers:{large:!0,top:!0,start:!0,light:!0}}],staticClass:"ellipsis"},[t._v(t._s(e.description))]):s("span",[t._v("-")])]),t._v(" "),s("td",[e.modifyBy?s("span",[t._v(t._s(e.modifyBy))]):s("span",[t._v("-")])]),t._v(" "),s("td",["OFFLINE"===e.scheduleReleaseState?s("span",[t._v(t._s(t.$t("offline")))]):t._e(),t._v(" "),"ONLINE"===e.scheduleReleaseState?s("span",[t._v(t._s(t.$t("online")))]):t._e(),t._v(" "),e.scheduleReleaseState?t._e():s("span",[t._v("-")])]),t._v(" "),s("td",{staticStyle:{"z-index":"inherit"}},[s("x-button",{attrs:{type:"info",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("Edit"),disabled:"ONLINE"===e.releaseState,icon:"ans-icon-edit"},on:{click:function(s){return t._edit(e)}}}),t._v(" "),s("x-button",{attrs:{type:"success",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("Start"),disabled:"ONLINE"!==e.releaseState,icon:"ans-icon-play"},on:{click:function(s){return t._start(e)}}}),t._v(" "),s("x-button",{attrs:{type:"info",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("Timing"),disabled:"ONLINE"!==e.releaseState||null!==e.scheduleReleaseState,icon:"ans-icon-timer"},on:{click:function(s){return t._timing(e)}}}),t._v(" "),"OFFLINE"===e.releaseState?s("x-button",{attrs:{type:"warning",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("online tooltip"),icon:"ans-icon-upward"},on:{click:function(s){return t._poponline(e)}}}):t._e(),t._v(" "),"ONLINE"===e.releaseState?s("x-button",{attrs:{type:"error",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("offline"),icon:"ans-icon-downward"},on:{click:function(s){return t._downline(e)}}}):t._e(),t._v(" "),s("x-button",{attrs:{type:"info",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("Copy Workflow"),disabled:"ONLINE"===e.releaseState,icon:"ans-icon-copy"},on:{click:function(s){return t._copyProcess(e)}}}),t._v(" "),s("x-button",{attrs:{type:"info",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("Cron Manage"),disabled:"ONLINE"!==e.releaseState,icon:"ans-icon-datetime"},on:{click:function(s){return t._timingManage(e)}}}),t._v(" "),s("x-poptip",{ref:"poptip-delete-"+i,refInFor:!0,attrs:{placement:"bottom-end",width:"90"}},[s("p",[t._v(t._s(t.$t("Delete?")))]),t._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"0","padding-top":"4px"}},[s("x-button",{attrs:{type:"text",size:"xsmall",shape:"circle"},on:{click:function(e){return t._closeDelete(i)}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),s("x-button",{attrs:{type:"primary",size:"xsmall",shape:"circle"},on:{click:function(s){return t._delete(e,i)}}},[t._v(t._s(t.$t("Confirm")))])],1),t._v(" "),s("template",{slot:"reference"},[s("x-button",{attrs:{icon:"ans-icon-trash",type:"error",shape:"circle",size:"xsmall",disabled:"ONLINE"===e.releaseState,"data-toggle":"tooltip",title:t.$t("delete")}})],1)],2),t._v(" "),s("x-button",{attrs:{type:"info",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("TreeView"),icon:"ans-icon-node"},on:{click:function(s){return t._treeView(e)}}}),t._v(" "),s("x-button",{attrs:{type:"info",shape:"circle",size:"xsmall","data-toggle":"tooltip",title:t.$t("Export"),icon:"ans-icon-download"},on:{click:function(s){return t._export(e)}}})],1)])}))],2)]),t._v(" "),s("x-poptip",{directives:[{name:"show",rawName:"v-show",value:""!==t.strSelectIds,expression:"strSelectIds !== ''"}],ref:"poptipDeleteAll",attrs:{placement:"bottom-start",width:"90"}},[s("p",[t._v(t._s(t.$t("Delete?")))]),t._v(" "),s("div",{staticStyle:{"text-align":"right",margin:"0","padding-top":"4px"}},[s("x-button",{attrs:{type:"text",size:"xsmall",shape:"circle"},on:{click:function(e){return t._closeDelete(-1)}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),s("x-button",{attrs:{type:"primary",size:"xsmall",shape:"circle"},on:{click:function(e){return t._delete({},-1)}}},[t._v(t._s(t.$t("Confirm")))])],1),t._v(" "),s("template",{slot:"reference"},[s("x-button",{staticStyle:{position:"absolute",bottom:"-48px",left:"22px"},attrs:{size:"xsmall"}},[t._v(t._s(t.$t("Delete")))])],1)],2),t._v(" "),""!==t.strSelectIds?[s("x-button",{staticStyle:{position:"absolute",bottom:"-48px",left:"80px"},attrs:{size:"xsmall"},on:{click:function(e){return t._batchExport(t.item)}}},[t._v(t._s(t.$t("Export")))])]:t._e()],2)},n=[]},676:function(t,e,s){"use strict";s.r(e);var i=s(1610),n=s(1082);for(var a in n)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(a);s(1502);var o=s(7),r=Object(o.a)(n.default,i.a,i.b,!1,null,null,null);e.default=r.exports},732:function(t,e,s){"use strict";s.r(e);var i=s(733),n=s.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(a);e.default=n.a},733:function(t,e,s){"use strict";e.__esModule=!0;var i,n=s(28),a=(i=n)&&i.__esModule?i:{default:i};e.default={name:"conditions",data:function(){return{searchVal:""}},props:{operation:Array},methods:{_ckQuery:function(){this.$emit("on-conditions",{searchVal:a.default.trim(this.searchVal)})}},computed:{isShow:function(){return this.$slots["search-group"]}},created:function(){a.default.isEmpty(this.$route.query)||(this.searchVal=this.$route.query.searchVal||"")},components:{}}},746:function(t,e,s){"use strict";s.r(e);var i=s(747),n=s(732);for(var a in n)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(a);var o=s(7),r=Object(o.a)(n.default,i.a,i.b,!1,null,null,null);e.default=r.exports},747:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"conditions-model"},[s("div",{staticClass:"left"},[t._t("button-group")],2),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"form-box"},[t.isShow?t._t("search-group"):t._e(),t._v(" "),t.isShow?t._e():[s("div",{staticClass:"list"},[s("x-button",{attrs:{type:"ghost",size:"small",icon:"ans-icon-search"},on:{click:t._ckQuery}})],1),t._v(" "),s("div",{staticClass:"list"},[s("x-input",{staticStyle:{width:"180px"},attrs:{size:"small",placeholder:t.$t("Please enter keyword"),type:"text"},on:{"on-enterkey":t._ckQuery},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1)]],2)])])},n=[]},751:function(t,e,s){"use strict";e.__esModule=!0,e.setUrlParams=function(t){n.default.push({query:(0,i.default)(n.default.history.current.query,t)})};var i=a(s(766)),n=a(s(291));function a(t){return t&&t.__esModule?t:{default:t}}},753:function(t,e,s){"use strict";e.__esModule=!0;var i,n=s(28),a=(i=n)&&i.__esModule?i:{default:i},o=s(751);e.default={watch:{searchParams:{deep:!0,handler:function(){(0,o.setUrlParams)(this.searchParams),this._debounceGET()}}},created:function(){a.default.isEmpty(this.$route.query)||(this.searchParams=a.default.assign(this.searchParams,this.$route.query))},mounted:function(){this._debounceGET()},methods:{_debounceGET:a.default.debounce((function(t){this._getList(t)}),100,{leading:!1,trailing:!0})}}},767:function(t,e,s){"use strict";s.r(e);var i=s(768),n=s.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(a);e.default=n.a},768:function(t,e,s){"use strict";e.__esModule=!0;var i=u(s(28)),n=u(s(295)),a=u(s(787)),o=u(s(35)),r=s(784),c=u(s(789)),l=u(s(791));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"start-process",data:function(){return{store:o.default,processDefinitionId:0,failureStrategy:"CONTINUE",warningTypeList:r.warningTypeList,workflowName:"",warningType:"",notifyGroupList:[],warningGroupId:"",scheduleTime:"",spinnerLoading:!1,execType:!1,taskDependType:"TASK_POST",receivers:[],receiversCc:[],runMode:"RUN_MODE_SERIAL",processInstancePriority:"MEDIUM",workerGroup:"default"}},props:{item:Object,startNodeList:{type:String,default:""},sourceType:String},methods:{_datepicker:function(t){this.scheduleTime=t},_start:function(){var t=this;this.spinnerLoading=!0;var e={processDefinitionId:this.item.id,scheduleTime:this.scheduleTime.length&&this.scheduleTime.join(",")||"",failureStrategy:this.failureStrategy,warningType:this.warningType,warningGroupId:""==this.warningGroupId?0:this.warningGroupId,execType:this.execType?"COMPLEMENT_DATA":null,startNodeList:this.startNodeList,taskDependType:this.taskDependType,runMode:this.runMode,processInstancePriority:this.processInstancePriority,receivers:this.receivers.join(",")||"",receiversCc:this.receiversCc.join(",")||"",workerGroup:this.workerGroup};"contextmenu"===this.sourceType&&(e.taskDependType=this.taskDependType),this.store.dispatch("dag/processStart",e).then((function(e){t.$message.success(e.msg),t.$emit("onUpdate"),setTimeout((function(){t.spinnerLoading=!1,t.close()}),500)})).catch((function(e){t.$message.error(e.msg||""),t.spinnerLoading=!1}))},_getNotifyGroupList:function(){var t=this;return new Promise((function(e,s){var n=i.default.cloneDeep(t.store.state.dag.notifyGroupListS)||[];n.length?(t.notifyGroupList=n,e()):t.store.dispatch("dag/getNotifyGroupList").then((function(s){t.notifyGroupList=s,e()}))}))},_getReceiver:function(){var t=this;this.store.dispatch("dag/getReceiver",{processDefinitionId:this.item.id}).then((function(e){t.receivers=e.receivers&&e.receivers.split(",")||[],t.receiversCc=e.receiversCc&&e.receiversCc.split(",")||[]}))},ok:function(){this._start()},close:function(){this.$emit("close")}},watch:{execType:function(t){this.scheduleTime=t?[(0,n.default)().format("YYYY-MM-DD 00:00:00"),(0,n.default)().format("YYYY-MM-DD 00:00:00")]:""}},created:function(){var t=this;this.warningType=this.warningTypeList[0].id,this.workflowName=this.item.name,this._getReceiver();var e=this.store.state.security.workerGroupsListAll||[];e.length?this.workerGroup=e[0].id:this.store.dispatch("security/getWorkerGroupsAll").then((function(e){t.$nextTick((function(){e.length>0&&(t.workerGroup=e[0].id)}))}))},mounted:function(){var t=this;this._getNotifyGroupList().then((function(){t.$nextTick((function(){t.warningGroupId=""}))})),this.workflowName=this.item.name},computed:{},components:{mEmail:a.default,mPriority:c.default,mWorkerGroups:l.default}}},792:function(t,e,s){},892:function(t,e,s){"use strict";s.r(e);var i=s(920),n=s(767);for(var a in n)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(a);s(896);var o=s(7),r=Object(o.a)(n.default,i.a,i.b,!1,null,null,null);e.default=r.exports},896:function(t,e,s){"use strict";s(792)},920:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return n}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"start-process-model"},[s("div",{staticClass:"title-box"},[s("span",[t._v(t._s(t.$t("Please set the parameters before starting")))])]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Process Name"))+"\n    ")]),t._v(" "),s("div",{staticStyle:{"line-height":"32px"}},[t._v(t._s(t.workflowName))])]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Failure Strategy"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont"},[s("x-radio-group",{staticStyle:{"margin-top":"7px"},model:{value:t.failureStrategy,callback:function(e){t.failureStrategy=e},expression:"failureStrategy"}},[s("x-radio",{attrs:{label:"CONTINUE"}},[t._v(t._s(t.$t("Continue")))]),t._v(" "),s("x-radio",{attrs:{label:"END"}},[t._v(t._s(t.$t("End")))])],1)],1)]),t._v(" "),"contextmenu"===t.sourceType?s("div",{staticClass:"clearfix list",staticStyle:{"margin-top":"-8px"}},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Node execution"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont",staticStyle:{"padding-top":"6px"}},[s("x-radio-group",{model:{value:t.taskDependType,callback:function(e){t.taskDependType=e},expression:"taskDependType"}},[s("x-radio",{attrs:{label:"TASK_POST"}},[t._v(t._s(t.$t("Backward execution")))]),t._v(" "),s("x-radio",{attrs:{label:"TASK_PRE"}},[t._v(t._s(t.$t("Forward execution")))]),t._v(" "),s("x-radio",{attrs:{label:"TASK_ONLY"}},[t._v(t._s(t.$t("Execute only the current node")))])],1)],1)]):t._e(),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Notification strategy"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont"},[s("x-select",{staticStyle:{width:"200px"},model:{value:t.warningType,callback:function(e){t.warningType=e},expression:"warningType"}},t._l(t.warningTypeList,(function(t){return s("x-option",{key:t.id,attrs:{value:t.id,label:t.code}})})),1)],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Process priority"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont"},[s("m-priority",{model:{value:t.processInstancePriority,callback:function(e){t.processInstancePriority=e},expression:"processInstancePriority"}})],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Worker group"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont"},[s("m-worker-groups",{model:{value:t.workerGroup,callback:function(e){t.workerGroup=e},expression:"workerGroup"}})],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Notification group"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont"},[s("x-select",{staticStyle:{width:"200px"},attrs:{disabled:!t.notifyGroupList.length},scopedSlots:t._u([{key:"trigger",fn:function(e){var i=e.selectedModel;return s("x-input",{staticStyle:{width:"200px"},attrs:{readonly:"",placeholder:t.$t("Please select a notification group"),value:i?i.label:""},on:{"on-click-icon":function(e){e.stopPropagation(),t.warningGroupId=""}}},[s("em",{directives:[{name:"show",rawName:"v-show",value:t.warningGroupId,expression:"warningGroupId"}],staticClass:"ans-icon-fail-solid",staticStyle:{"font-size":"15px",cursor:"pointer"},attrs:{slot:"suffix"},slot:"suffix"}),t._v(" "),s("em",{directives:[{name:"show",rawName:"v-show",value:!t.warningGroupId,expression:"!warningGroupId"}],staticClass:"ans-icon-arrow-down",staticStyle:{"font-size":"12px"},attrs:{slot:"suffix"},slot:"suffix"})])}}]),model:{value:t.warningGroupId,callback:function(e){t.warningGroupId=e},expression:"warningGroupId"}},[t._v(" "),t._l(t.notifyGroupList,(function(t){return s("x-option",{key:t.id,attrs:{value:t.id,label:t.code}})}))],2)],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Recipient"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont",staticStyle:{width:"688px"}},[s("m-email",{attrs:{"repeat-data":t.receiversCc},model:{value:t.receivers,callback:function(e){t.receivers=e},expression:"receivers"}})],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Cc"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont",staticStyle:{width:"688px"}},[s("m-email",{attrs:{"repeat-data":t.receivers},model:{value:t.receiversCc,callback:function(e){t.receiversCc=e},expression:"receiversCc"}})],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n      "+t._s(t.$t("Complement Data"))+"\n    ")]),t._v(" "),s("div",{staticClass:"cont"},[s("div",{staticStyle:{"padding-top":"6px"}},[s("x-checkbox",{model:{value:t.execType,callback:function(e){t.execType=e},expression:"execType"}},[t._v(t._s(t.$t("Whether it is a complement process?")))])],1)])]),t._v(" "),t.execType?[s("div",{staticClass:"clearfix list",staticStyle:{margin:"-6px 0 16px 0"}},[s("div",{staticClass:"text"},[t._v("\n        "+t._s(t.$t("Mode of execution"))+"\n      ")]),t._v(" "),s("div",{staticClass:"cont"},[s("x-radio-group",{staticStyle:{"margin-top":"7px"},model:{value:t.runMode,callback:function(e){t.runMode=e},expression:"runMode"}},[s("x-radio",{attrs:{label:"RUN_MODE_SERIAL"}},[t._v(t._s(t.$t("Serial execution")))]),t._v(" "),s("x-radio",{attrs:{label:"RUN_MODE_PARALLEL"}},[t._v(t._s(t.$t("Parallel execution")))])],1)],1)]),t._v(" "),s("div",{staticClass:"clearfix list"},[s("div",{staticClass:"text"},[t._v("\n        "+t._s(t.$t("Schedule date"))+"\n      ")]),t._v(" "),s("div",{staticClass:"cont"},[s("x-datepicker",{staticStyle:{width:"360px"},attrs:{"panel-num":2,placement:"bottom-start",value:t.scheduleTime,type:"daterange",placeholder:t.$t("Select date range"),format:"YYYY-MM-DD HH:mm:ss"},on:{"on-change":t._datepicker}})],1)])]:t._e(),t._v(" "),s("div",{staticClass:"submit"},[s("x-button",{attrs:{type:"text"},on:{click:function(e){return t.close()}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),t._v(" "),s("x-button",{attrs:{type:"primary",shape:"circle",loading:t.spinnerLoading},on:{click:function(e){return t.ok()}}},[t._v(t._s(t.spinnerLoading?"Loading...":t.$t("Start"))+" ")])],1)],2)},n=[]}}]);